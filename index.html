<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <meta name="referrer" content="no-referrer">
<style>
  :root {
    /* æ·ºè‰²ä¸»é¡Œ (è‰è“ç‰›å¥¶é¢¨) */
    --bg-color: #FFF8F0;         /* æº«æš–ç±³ç™½èƒŒæ™¯ */
    --card-bg: #FFFFFF;          /* ç´”ç™½å¡ç‰‡ */
    --primary: #FF9EAA;          /* æŸ”å’Œç²‰ç´…ä¸»è‰² */
    --primary-hover: #FF7B8E;    /* æ·±ä¸€é»çš„ç²‰ç´… */
    --text-main: #5D4037;        /* æš–å’–å•¡è‰²æ–‡å­—ï¼Œä¸ä½¿ç”¨ç´”é»‘ */
    --text-light: #8D6E63;       /* æ·ºå’–å•¡è‰²å‰¯æ¨™ */
    --modal-bg: #FFFFFF;         /* Modal èƒŒæ™¯ */
    --input-bg: #FFF0F5;         /* è¼¸å…¥æ¡†æ·ºç²‰èƒŒæ™¯ */
    --input-border: #FFD1DC;     /* è¼¸å…¥æ¡†é‚Šæ¡† */
    --shadow: 0 8px 20px rgba(255, 158, 170, 0.25); /* æŸ”å’Œç²‰è‰²é™°å½± */
    --danger: #FF8A80;           /* è­¦å‘Šè‰² */
    --tag-bg: #FFF0F5;           /* æ¨™ç±¤èƒŒæ™¯ */
    --tag-text: #FF9EAA;         /* æ¨™ç±¤æ–‡å­— */
  }

  /* æ·±è‰²ä¸»é¡Œ (é»‘å·§å…‹åŠ›é¢¨) */
  [data-theme="dark"] {
    --bg-color: #2C2420;         /* æ·±å’–å•¡èƒŒæ™¯ */
    --card-bg: #3E322C;          /* ç‰›å¥¶å·§å…‹åŠ›å¡ç‰‡ */
    --primary: #FFB7B2;          /* äº®ä¸€é»çš„ç²‰è‰²ï¼Œåœ¨æ·±è‰²ä¸Šæ¸…æ¥š */
    --primary-hover: #FFCDD2;
    --text-main: #EFEBE9;        /* ç±³è‰²æ–‡å­— */
    --text-light: #BCAAA4;       /* æ·ºç°å’–å‰¯æ¨™ */
    --modal-bg: #3E322C;
    --input-bg: #4E4038;         /* æ·±è‰²è¼¸å…¥æ¡† */
    --input-border: #5D4037;
    --shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    --tag-bg: #4E4038;
    --tag-text: #FFB7B2;
  }

  body {
    font-family: 'Nunito', 'Microsoft JhengHei', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-main);
    margin: 0;
    padding: 20px;
    transition: background-color 0.4s ease, color 0.4s ease;
    line-height: 1.6;
  }

  /* æŒ‰éˆ•è¨­å®šï¼šåœ“æ½¤å¯æ„› */
  button {
    font-family: inherit;
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Qå½ˆæ•ˆæœ */
    outline: none;
  }

  button:active {
    transform: scale(0.95);
  }

  /* é€šç”¨è¼¸å…¥æ¡† */
  input[type="text"], 
  input[type="file"], 
  textarea {
    width: 100%;
    padding: 12px 20px;
    background-color: var(--input-bg);
    border: 2px solid var(--input-border);
    color: var(--text-main);
    border-radius: 20px;
    outline: none;
    transition: 0.3s;
    font-size: 0.95rem;
    box-sizing: border-box;
  }

  input[type="text"]:focus, 
  textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 158, 170, 0.2);
  }

  /* Header å€åŸŸ */
  .header {
    max-width: 1200px;
    margin: 0 auto 40px auto;
    text-align: center;
  }

  .header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 20px;
    background: var(--card-bg);
    padding: 15px 25px;
    border-radius: 25px;
    box-shadow: var(--shadow);
  }

  h1 {
    color: var(--primary);
    margin: 0;
    font-size: 1.6rem;
    font-weight: 800;
    letter-spacing: 1px;
  }

  .subtitle {
    font-size: 1rem;
    color: var(--text-light);
    display: inline-block;
    padding: 8px 25px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50px;
    border: 1px dashed var(--text-light);
  }

/* ç¢ºä¿æœå°‹åˆ—æ˜¯æ©«å‘æ’åˆ— */
.search-bar {
  display: flex;
  align-items: center; /* å‚ç›´ç½®ä¸­ */
  gap: 10px;           /* è¼¸å…¥æ¡†è·ŸæŒ‰éˆ•çš„è·é›¢ */
  width: 100%;
  max-width: 500px;    /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
}

/* é—œéµä¿®æ­£ï¼šé‡å°æœå°‹æ¡†è£¡çš„ input */
.search-bar input {
  width: auto;         /* è¦†è“‹åŸæœ¬çš„ 100% è¨­å®š */
  flex: 1;             /* è®“å®ƒè‡ªå‹•ä¼¸å±•å¡«æ»¿å‰©é¤˜ç©ºé–“ */
  margin: 0;
}

  /* ä¸»è¦æŒ‰éˆ•æ¨£å¼ */
  .btn-upload, .btn-copy, #sysBtnOk {
    background: var(--primary);
    color: #fff; /* æŒ‰éˆ•æ–‡å­—ç¶­æŒç™½è‰² */
    padding: 10px 25px;
    border-radius: 25px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .btn-upload:hover, .btn-copy:hover, #sysBtnOk:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
  }

  /* ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• */
  .theme-toggle {
    background: var(--input-bg);
    color: var(--text-main);
    border: 2px solid var(--input-border);
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: bold;
  }

  /* å¡ç‰‡ç¶²æ ¼ */
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
  }

  /* å–®å¼µå¡ç‰‡ */
  .card {
    background: var(--card-bg);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    position: relative;
    border: 1px solid var(--input-border);
  }

  .card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow);
  }

  .card-img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    background-color: var(--input-bg);
  }

  .card-body {
    padding: 20px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .card-title {
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: var(--text-main);
  }

  /* æ¨™ç±¤ Tag */
  .card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: auto;
  }

  .tag {
    font-size: 0.8rem;
    color: var(--tag-text);
    background: var(--tag-bg);
    padding: 4px 12px;
    border-radius: 15px;
    transition: 0.2s;
  }

  .tag:hover {
    background: var(--primary);
    color: white;
  }

  /* å¡ç‰‡ä¸Šçš„åˆªé™¤æŒ‰éˆ• */
  .btn-delete {
    position: absolute;
    top: 12px;
    right: 12px;
    background: rgba(255, 255, 255, 0.95);
    color: var(--danger);
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: 0.3s;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    z-index: 5;
  }

  .card:hover .btn-delete {
    opacity: 1;
    transform: scale(1);
  }
  
  /* æ·±è‰²æ¨¡å¼ä¸‹åˆªé™¤éˆ•çš„èƒŒæ™¯å¾®èª¿ */
  [data-theme="dark"] .btn-delete {
      background: rgba(62, 50, 44, 0.9);
  }

  .btn-delete:hover {
    background: var(--danger) !important;
    color: white;
  }

  /* ----- Modal é€šç”¨è¨­å®š (åŒ…å«è©³æƒ…ã€ä¸Šå‚³ã€ç³»çµ±æç¤º) ----- */
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    justify-content: center;
    align-items: center;
  }

  /* Modal å…§å®¹å€å¡Š */
  .modal-content {
    background: var(--modal-bg); /* è·Ÿéš¨ä¸»é¡Œ */
    color: var(--text-main);     /* è·Ÿéš¨ä¸»é¡Œ */
    width: 90%;
    max-width: 850px;
    max-height: 85vh;
    border-radius: 25px;
    display: flex;
    overflow: hidden;
    box-shadow: var(--shadow);
    border: 1px solid var(--input-border);
  }

  /* è©³æƒ…é å·¦å³ä½ˆå±€ */
  .modal-left {
    flex: 1.2;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .modal-left img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  .modal-right {
    flex: 1;
    padding: 30px;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    position: relative;
    background: var(--modal-bg);
  }

  .close {
    position: absolute;
    top: 20px;
    right: 25px;
    font-size: 2rem;
    cursor: pointer;
    color: var(--text-light);
    line-height: 1;
    z-index: 10;
  }
  .close:hover { color: var(--primary); }

  h2, h3 { color: var(--text-main); }

  .prompt-label {
    font-size: 0.85rem;
    font-weight: bold;
    color: var(--primary);
    margin-top: 25px;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .modal-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
  }

  /* Modal è£¡çš„ç°è‰²å€å¡Š (æç¤ºè©é¡¯ç¤ºå€) */
  .modal-desc-box {
    background: var(--input-bg);
    padding: 15px;
    border-radius: 15px;
    font-size: 0.9rem;
    line-height: 1.7;
    border: 1px solid var(--input-border);
    color: var(--text-main);
    font-family: monospace;
    white-space: pre-wrap;
  }

  /* Modal è£¡çš„åˆªé™¤éˆ• */
  .btn-modal-delete {
    background: transparent;
    color: var(--danger);
    border: 2px solid var(--danger);
    padding: 5px 12px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    margin-left: 15px;
    margin-right: 20px;
    font-weight: bold;
  }
  .btn-modal-delete:hover {
    background: var(--danger);
    color: white;
  }

  /* ----- ä¸Šå‚³èˆ‡ç³»çµ±æç¤ºæ¡†ç‰¹åˆ¥æ¨£å¼ ----- */
  #uploadSection, #systemModal .modal-content {
    background: var(--modal-bg);
    color: var(--text-main);
    padding: 30px;
    border-radius: 25px;
    box-shadow: var(--shadow);
  }

  /* é‡å°ä¸Šå‚³è¡¨å–®çš„å®šä½ */
  #uploadSection {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow-y: auto;
    z-index: 1001;
    border: 1px solid var(--input-border);
  }
  
  .form-group { margin-bottom: 20px; }
  .form-group label {
      display: block; 
      margin-bottom: 8px; 
      font-weight: bold; 
      color: var(--text-main);
  }

  /* ç³»çµ±æç¤ºæ¡†å–æ¶ˆæŒ‰éˆ• */
  .btn-cancel {
    background: var(--input-bg);
    color: var(--text-main);
    border: 1px solid var(--input-border);
    padding: 10px 25px;
    border-radius: 25px;
    font-weight: bold;
  }
  .btn-cancel:hover {
    background: var(--input-border);
  }

  /* è¼‰å…¥ä¸­é®ç½© */
  .loader {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    font-size: 1.2rem;
    backdrop-filter: blur(5px);
  }

  /* RWD æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
  @media (max-width: 768px) {
    .modal-content { flex-direction: column; overflow-y: scroll; height: auto;}
    .modal-left { height: 250px; flex: none; width: 100%; background: #000; }
    .modal-right { padding: 20px; }
    .header-top { flex-direction: column; align-items: stretch; padding: 20px;}
    .search-bar { max-width: 100%; }
    .btn-delete { opacity: 1; background: var(--card-bg); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    h1 { font-size: 1.4rem; }
  }

/* æ¸…é™¤æŒ‰éˆ•å°ˆç”¨æ¨£å¼ */
.btn-clear {
  background: var(--card-bg);
  color: var(--text-light);
  border: 2px solid var(--input-border);
  border-radius: 50%; /* åœ“åœ“çš„æ¯”è¼ƒå¯æ„› */
  width: 48px;        /* é…åˆè¼¸å…¥æ¡†çš„é«˜åº¦ */
  height: 48px;
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;     /* é˜²æ­¢è¦–çª—è®Šçª„æ™‚æŒ‰éˆ•è¢«å£“æ‰ */
  margin-left: 5px;   /* è·Ÿè¼¸å…¥æ¡†æœ‰é»è·é›¢ */
}

.btn-clear:hover {
  border-color: var(--primary);
  color: var(--primary);
  background: var(--input-bg);
  transform: rotate(90deg); /* å¢åŠ ä¸€é»äº’å‹•è¶£å‘³ */
}

/* ----- æç¤ºè©æ•™å­¸å°ˆç”¨æ¨£å¼ ----- */
  details {
    margin-bottom: 15px;
    border: 1px solid var(--input-border);
    border-radius: 15px;
    background: var(--card-bg);
    overflow: hidden;
    transition: 0.3s;
  }

  details[open] {
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    border-color: var(--primary);
  }

  summary {
    padding: 15px 20px;
    cursor: pointer;
    font-weight: bold;
    color: var(--text-main);
    background: var(--bg-color); /* æ¨™é¡Œåº•è‰²ç¨å¾®ä¸åŒ */
    list-style: none; /* éš±è—é è¨­ç®­é ­ */
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.1rem;
  }

  /* è‡ªè£½å¯æ„›ç®­é ­ */
  summary::after {
    content: 'â–¼';
    color: var(--primary);
    transition: 0.2s;
    font-size: 0.8rem;
  }

  details[open] summary::after {
    transform: rotate(180deg);
  }

  .details-content {
    padding: 20px;
    line-height: 1.8;
    color: var(--text-main);
    border-top: 1px solid var(--input-border);
  }

  .details-content h4 {
    margin-top: 15px;
    margin-bottom: 8px;
    color: var(--primary);
    border-left: 4px solid var(--primary);
    padding-left: 10px;
  }

  /* é—œéµå­—æŒ‰éˆ•æ¨£å¼ */
  .kw {
    display: inline-block;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    color: var(--text-main);
    padding: 2px 8px;
    border-radius: 8px;
    margin: 3px;
    font-family: monospace;
    font-size: 0.9rem;
    cursor: copy; /* æ»‘é¼ æ¸¸æ¨™è®Šæˆè¤‡è£½ */
    transition: 0.2s;
  }

  .kw:hover {
    background: var(--primary);
    color: white;
    transform: scale(1.05);
  }
  
  .keyword-group { margin-bottom: 10px; }
  .label { font-weight:bold; color:var(--text-light); }
  .tip { font-size: 0.85rem; color: var(--text-light); font-style: italic; margin-top: 10px;}

/* é å°¾ç‰ˆæœ¬è™Ÿæ¨£å¼ */
.footer {
  text-align: center;
  margin-top: 50px;       /* èˆ‡ä¸Šæ–¹å…§å®¹éš”é–‹ */
  margin-bottom: 20px;    /* èˆ‡è¦–çª—åº•éƒ¨ç•™é»ç©ºéš™ */
  padding-top: 20px;
  border-top: 1px dashed var(--input-border); /* åŠ ä¸€æ¢æ·¡æ·¡çš„è™›ç·šåˆ†éš” */
  color: var(--text-light); /* ä½¿ç”¨æ·ºè‰²æ–‡å­— */
  font-size: 0.8rem;      /* å­—é«”ç¸®å° */
  opacity: 0.7;           /* è®“å®ƒæ›´ä¸é¡¯çœ¼ä¸€é» */
  display: flex;
  justify-content: center;
  gap: 15px;              /* ç‰ˆæœ¬è™Ÿè·Ÿç‰ˆæ¬Šå®£å‘Šçš„è·é›¢ */
}

/* è®“ç‰ˆæœ¬è™Ÿæ»‘é¼ ç§»éå»æ™‚ç¨å¾®æ˜é¡¯ä¸€é»ï¼Œå¢åŠ äº’å‹•æ„Ÿ */
.version-tag:hover {
  opacity: 1;
  color: var(--primary);
  cursor: help;
}
</style></head>
<body>

  <div class="header">

<div class="header-top">
  <h1>âœ¨ AI æç¤ºè©åœ–åº«</h1>
  
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="æœå°‹æç¤ºè©(Prompt) æˆ– #Tag...">
    <button class="btn-clear" onclick="clearFilter()" title="æ¸…é™¤æœå°‹">âœ•</button>
  </div>

  <div class="header-buttons">
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ åˆ‡æ›æ¨¡å¼</button>
    <button class="btn-upload" onclick="openTutorial()" style="background:var(--text-light);">ğŸ“˜ ç§˜ç±</button>
    <button class="btn-upload" onclick="toggleUpload()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-upload" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383"/>
  <path fill-rule="evenodd" d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708z"/>
</svg> æ–°å¢éˆæ„Ÿ</button>
  </div>
</div>    

    <div class="subtitle">
      é€éçœ‹åœ–æ‰¾éˆæ„Ÿã€‚è‡ªè¨‚çš„åˆ†é¡æª¢ç´¢ã€‚AI å‰µæ„æç¤ºè©åº«éš¨å–éš¨ç”¨ã€‚
    </div>
  </div>

  <div class="gallery" id="gallery">
    <p style="text-align:center; width:100%; color:#888;">æ­£åœ¨è¼‰å…¥éˆæ„Ÿåº«...</p>
  </div>

  <div id="detailModal" class="modal">
    <div class="modal-content">
      <div class="modal-left">
        <img id="modalImg" src="">
      </div>
      <div class="modal-right">
        <span class="close" onclick="closeModal()">&times;</span>

        <div style="display:flex; justify-content:space-between; align-items:flex-start;">
            <h2 id="modalTitle" style="margin:0; flex-grow:1;">æ¨™é¡Œ</h2>
           <button class="btn-modal-delete" id="modalDeleteBtn" onclick=""><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
</svg></button>
        </div>

        <div class="prompt-label">AI é›²æ¨™ç±¤ (Cloud Tags)</div>
        <div class="card-tags" id="modalTags" style="margin-bottom: 15px;"></div>

        <div class="modal-header-row">
           <div class="prompt-label">æç¤ºè© (Prompt)</div>
           <button class="btn-copy" onclick="copyDesc()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0  00-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
</svg></button>
        </div>

        <div class="modal-desc-box">
          <div id="modalDesc"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="uploadOverlay" class="modal" style="z-index: 999;" onclick="if(event.target==this) toggleUpload()">
    <form id="uploadForm" onsubmit="handleUpload(event)">
      <div id="uploadSection" style="display:block;">
        <h3 style="text-align:center; color:var(--primary);">æ–°å¢ AI éˆæ„Ÿ</h3>
        <div class="form-group">
          <label>åƒè€ƒåœ–ç‰‡</label>
          <input type="file" name="imageFile" accept="image/*" required>
        </div>
        <div class="form-group">
          <label>æ¨™é¡Œ</label>
          <input type="text" name="title" required placeholder="ä¾‹å¦‚: è³½åšé¾å…‹å°‘å¥³">
        </div>
        <div class="form-group">
          <label>é›²æ¨™ç±¤ (Tag)</label>
          <input type="text" name="tags" placeholder="ä¾‹å¦‚: 8k, masterpiece, light effect">
        </div>
        <div class="form-group">
          <label>å®Œæ•´æç¤ºè© (Prompt)</label>
          <textarea name="desc" rows="5" placeholder="è¼¸å…¥å®Œæ•´çš„ AI ç”ŸæˆæŒ‡ä»¤..."></textarea>
        </div>
        <button type="submit" class="btn-upload" style="width:100%">ç¢ºèªå»ºæª”</button>
      </div>
    </form>
  </div>

  <div class="loader" id="loader">è™•ç†ä¸­...</div>

<div id="systemModal" class="modal" style="z-index: 2000;">
    <div class="modal-content" style="max-width: 350px; flex-direction: column; height: auto; padding: 25px;">
      <h3 id="sysTitle" style="text-align:center; margin-bottom:15px; color:var(--primary);">æç¤º</h3>
      <p id="sysMsg" style="text-align:center; margin-bottom:25px; line-height:1.6; color:var(--text-main);"></p>

      <div style="display: flex; gap: 15px; justify-content: center;">
        <button id="sysBtnCancel" class="btn-cancel" onclick="closeSystemModal()">å–æ¶ˆ</button>
        <button id="sysBtnOk" class="btn-upload" style="min-width: 80px;">ç¢ºå®š</button>
      </div>
    </div>
  </div>

<div id="tutorialModal" class="modal">
  <div class="modal-content" style="max-width: 800px; flex-direction: column; max-height: 85vh;">
    
    <div style="padding: 20px 30px; border-bottom: 1px solid var(--input-border); display:flex; justify-content:space-between; align-items:center;">
      <h2 style="margin:0; font-size:1.5rem; color:var(--primary);">ğŸ“˜ è© å”±é­”æ³•ç§˜ç±</h2>
      <span class="close" onclick="closeTutorial()" style="position:static;">&times;</span>
    </div>

    <div class="modal-body" style="padding: 30px; overflow-y: auto;">
      
      <details open>
        <summary>ğŸ¤– æ‡¶äººæ³•ï¼šé€†å‘å·¥ç¨‹</summary>
        <div class="details-content">
          <p>ä¸çŸ¥é“æ€éº¼ä¸‹é«˜å“è³ªçš„æç¤ºè©ï¼Ÿ</p>
          <ol>
            <li>å…ˆå»æ”¶é›†åˆ¥äººçš„ä½œå“ã€‚</li>
            <li>ä¸Šå‚³çµ¦ AI å¾Œï¼Œè«‹ AI åˆ†æä¸¦ç”Ÿæˆæç¤ºè©ã€‚</li>
            <li>æœ‰äº†åŸºç¤å†é€²è¡Œèª¿æ•´ï¼Œæ•ˆç‡æ›´åŠ å€ï¼</li>
          </ol>
        </div>
      </details>

      <details>
        <summary>âœï¸ é¢¨æ ¼èˆ‡æ‰‹ç¹ªè³ªæ„Ÿ</summary>
        <div class="details-content">
          <p>è®“ç•«é¢æ›´æœ‰æº«åº¦çš„é—œéµå­—ï¼š</p>
          <div class="keyword-group">
            <span class="label">é¢¨æ ¼ï¼š</span>
            <span class="kw" onclick="copyKw(this)">Minimalist</span>
            <span class="kw" onclick="copyKw(this)">Hand-drawn</span>
            <span class="kw" onclick="copyKw(this)">Rough sketch</span>
          </div>
          <div class="keyword-group">
            <span class="label">ç­†è§¸ï¼š</span>
            <span class="kw" onclick="copyKw(this)">Ink texture</span>
            <span class="kw" onclick="copyKw(this)">Shaky lines</span>
            <span class="kw" onclick="copyKw(this)">Felt tip pen</span>
          </div>
          <div class="keyword-group">
            <span class="label">æ§‹åœ–ï¼š</span>
            <span class="kw" onclick="copyKw(this)">White background</span>
            <span class="kw" onclick="copyKw(this)">No 3D render</span>
          </div>
          <p class="tip">ğŸ’¡ é»æ“Šé—œéµå­—å¯ç›´æ¥è¤‡è£½ï¼</p>
        </div>
      </details>

      <details>
        <summary>ğŸš« æ‹’çµ•å¡‘è† å‘³ (å»é™¤ AI æ„Ÿ)</summary>
        <div class="details-content">
          <p>å¤ªå®Œç¾çš„ç·šæ¢åè€Œå‡ï¼Œè©¦è©¦çœ‹åŠ å…¥é€™äº›ã€Œç‘•ç–µã€ï¼š</p>
          <ul style="list-style: none; padding:0;">
            <li><span class="kw" onclick="copyKw(this)">Shaky hand-drawn lines</span> : é¿å…å¤ªå®Œç¾çš„å¹¾ä½•ç·šæ¢ã€‚</li>
            <li><span class="kw" onclick="copyKw(this)">Charcoal sketch effect</span> : å¢åŠ ç¢³ç­†æˆ–æ‘©æ“¦æ„Ÿã€‚</li>
            <li><span class="kw" onclick="copyKw(this)">Primitive drawing style</span> : åƒéš¨æ‰‹ç•«åœ¨ç­†è¨˜æœ¬ä¸Šçš„æ„Ÿè¦ºã€‚</li>
            <li><span class="kw" onclick="copyKw(this)">White paper texture</span> : å¢åŠ èƒŒæ™¯çœŸå¯¦ç´™å¼µç´‹ç†ã€‚</li>
          </ul>
        </div>
      </details>

      <details>
        <summary>âœ¨ æ°›åœå¤§è£œå¸– (Atmosphere)</summary>
        <div class="details-content">
          <p>æ°›åœæ˜¯æ±ºå®šåœ–ç‰‡è³ªæ„Ÿçš„éˆé­‚ï¼</p>
          
          <h4>1. å…‰å½± (Lighting)</h4>
          <div class="keyword-cloud">
            <span class="kw" onclick="copyKw(this)">Golden Hour</span>
            <span class="kw" onclick="copyKw(this)">Cinematic Lighting</span>
            <span class="kw" onclick="copyKw(this)">Volumetric Lighting</span>
            <span class="kw" onclick="copyKw(this)">Soft Lighting</span>
            <span class="kw" onclick="copyKw(this)">Bioluminescent</span>
            <span class="kw" onclick="copyKw(this)">Neon Glow</span>
          </div>

          <h4>2. æƒ…ç·’ (Mood)</h4>
          <div class="keyword-cloud">
            <span class="kw" onclick="copyKw(this)">Moody</span>
            <span class="kw" onclick="copyKw(this)">Ethereal</span>
            <span class="kw" onclick="copyKw(this)">Vintage</span>
            <span class="kw" onclick="copyKw(this)">Melancholy</span>
            <span class="kw" onclick="copyKw(this)">Muted Colors</span>
          </div>

          <h4>3. ç’°å¢ƒ (Environment)</h4>
          <div class="keyword-cloud">
            <span class="kw" onclick="copyKw(this)">Foggy</span>
            <span class="kw" onclick="copyKw(this)">Dust Motes</span>
            <span class="kw" onclick="copyKw(this)">Rain-soaked</span>
            <span class="kw" onclick="copyKw(this)">Cyberpunk Aesthetic</span>
            <span class="kw" onclick="copyKw(this)">Studio Ghibli style</span>
          </div>

          <h4>4. é›»å½±æ„Ÿ (Cinematic)</h4>
          <div class="keyword-cloud">
             <span class="kw" onclick="copyKw(this)">Film Grain</span>
             <span class="kw" onclick="copyKw(this)">Depth of Field</span>
             <span class="kw" onclick="copyKw(this)">Wide Shot</span>
             <span class="kw" onclick="copyKw(this)">Close-up</span>
          </div>
        </div>
      </details>

      <details>
        <summary>ğŸ¥Š å¯¦æˆ°ç¯„ä¾‹ï¼šåœ–æ›¸é¤¨å¥³å­©</summary>
        <div class="details-content">
          <div style="background:var(--bg-color); padding:15px; border-radius:10px; margin-bottom:10px;">
            <strong>ğŸ˜ æ™®é€šæè¿°ï¼š</strong><br>
            A girl in a library
          </div>
          <div style="background:var(--input-bg); padding:15px; border-radius:10px; border:1px solid var(--primary);">
            <strong>ğŸ˜ åŠ å…¥æ°›åœå¾Œï¼š</strong><br>
            A girl in a library, <span class="kw" onclick="copyKw(this)">Golden Hour</span>, <span class="kw" onclick="copyKw(this)">Volumetric lighting</span>, <span class="kw" onclick="copyKw(this)">Dust motes</span>, <span class="kw" onclick="copyKw(this)">Cinematic</span>, <span class="kw" onclick="copyKw(this)">Muted colors</span>
          </div>
          <p style="font-size:0.9rem; color:var(--text-light); margin-top:10px;">é€™æœƒè®“åŸæœ¬æ™®é€šçš„äººåƒï¼Œè®Šæˆä¸€å¼µå……æ»¿åˆå¾Œé™½å…‰ã€å¡µåŸƒé£›èˆã€è‰²èª¿é«˜ç´šçš„é›»å½±æµ·å ±ã€‚</p>
        </div>
      </details>

    </div>
  </div>
</div>

<div class="footer">
  <span class="version-tag">System Ver 1.0.0</span>
  <span class="copyright">PromptNano AI æç¤ºè©åœ–åº«</span>
</div>

  <script>
    let allPhotos = [];

    window.onload = function() {
      loadData();
      document.getElementById('uploadOverlay').style.display = 'none';
    };

function loadData() {
  google.script.run.withSuccessHandler(function(data) {
    // 1. å…ˆæŠŠå®Œæ•´çš„è³‡æ–™å­˜åˆ°å…¨åŸŸè®Šæ•¸å‚™ä»½
    allPhotos = data; 
    
    // 2. å†æŠŠè³‡æ–™æ‹¿å»ç•«åœ–
    renderGallery(allPhotos); 
  }).getPhotoData();
}

function renderGallery(data) {
      console.log('ğŸ“¦ å‰ç«¯æ”¶åˆ°è³‡æ–™:', data); // æ‰“é–‹ F12 Console çœ‹é€™è£¡

      const gallery = document.getElementById('gallery');
      gallery.innerHTML = ''; // æ¸…ç©ºç•«é¢

      // 1. æª¢æŸ¥è³‡æ–™æ˜¯å¦ç‚ºç©º
      if (!data || data.length === 0) {
        console.log('âš ï¸ è³‡æ–™ç‚ºç©ºæˆ–æ˜¯é•·åº¦ç‚º 0');
        gallery.innerHTML = '<p style="text-align:center; width:100%;">ç›®å‰æ²’æœ‰éˆæ„Ÿè³‡æ–™ï¼Œè«‹ä¸Šå‚³ã€‚</p>';
        return;
      }

      // 2. é–‹å§‹é€ç­†æ¸²æŸ“
      data.forEach((photo, index) => {
        try {
          console.log(`æ­£åœ¨æ¸²æŸ“ç¬¬ ${index + 1} ç­†è³‡æ–™:`, photo.title);

          let tagsHtml = '';
          // ã€é˜²å‘†é‡é»ã€‘: å¼·åˆ¶æŠŠ tags è½‰æˆå­—ä¸²å†è™•ç†ï¼Œé¿å…å¦‚æœæ˜¯æ•¸å­—æˆ– undefined å°è‡´ split å ±éŒ¯
          if (photo.tags) {
            const tagString = String(photo.tags);

            // ä¿®æ”¹é‡é» 1ï¼šæ”¹ç”¨ '#' ä¾†åˆ‡å‰²å­—ä¸²
            const tagList = tagString.split('#')
              .map(t => t.trim()) // å»é™¤å‰å¾Œç©ºç™½
              .filter(t => t);    // æ¿¾æ‰ç©ºå­—ä¸² (ä¾‹å¦‚é–‹é ­çš„ç©ºå­—ä¸²)

            // ä¿®æ”¹é‡é» 2ï¼šé¡¯ç¤ºæ™‚ç›´æ¥æ”¾ t (ä¸åŠ  #)ï¼Œé»æ“Šäº‹ä»¶å‚³é€çš„åƒæ•¸ä¹Ÿä¸ç”¨å‹•
            tagsHtml = tagList.slice(0, 3).map(t =>
              `<span class="tag" onclick="filterByTag('${t}', event)">${t}</span>`
            ).join('');

            if(tagList.length > 3) tagsHtml += `<span class="tag" style="background:none;">...</span>`;
          }

          const card = document.createElement('div');
          card.className = 'card';
          card.onclick = () => openModal(photo);

          // å»ºæ§‹ HTML
          card.innerHTML = `
            <button class="btn-delete" onclick="deleteItem('${photo.id}', event)" title="åˆªé™¤æ­¤éˆæ„Ÿ"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
</svg></button>
            <img class="card-img" src="${photo.url}" loading="lazy" onerror="this.src='https://placehold.co/400?text=Image+Error'">
            <div class="card-body">
              <div class="card-title">${photo.title || 'ç„¡æ¨™é¡Œ'}</div>
              <div class="card-tags">${tagsHtml}</div>
            </div>
          `;

          gallery.appendChild(card);
          console.log(`âœ… ç¬¬ ${index + 1} ç­†æ¸²æŸ“æˆåŠŸ`);

        } catch (err) {
          console.error(`âŒ ç¬¬ ${index + 1} ç­†æ¸²æŸ“å¤±æ•—!`, err);
          console.error('å‡ºéŒ¯çš„è³‡æ–™:', photo);
          // ç‚ºäº†è®“ä½ çœ‹è¦‹éŒ¯èª¤ï¼Œæˆ‘å€‘ç›´æ¥æŠŠéŒ¯èª¤é¡¯ç¤ºåœ¨ç•«é¢ä¸Š
          const errorCard = document.createElement('div');
          errorCard.style.padding = "20px";
          errorCard.style.color = "red";
          errorCard.innerText = `æ­¤å¡ç‰‡é¡¯ç¤ºéŒ¯èª¤: ${err.message}`;
          gallery.appendChild(errorCard);
        }
      });
    }

    // åˆªé™¤é …ç›®åŠŸèƒ½
function deleteItem(id, event, isFromModal = false) {
  if (event) event.stopPropagation();

  showConfirm("âš ï¸ ç¢ºå®šè¦åˆªé™¤é€™å€‹éˆæ„Ÿå—ï¼Ÿ\nè³‡æ–™èˆ‡åœ–ç‰‡å°‡ç„¡æ³•å¾©åŸã€‚", function() {

    if (isFromModal) closeModal();

    const loader = document.getElementById('loader');
    loader.innerText = "æ­£åœ¨åˆªé™¤è³‡æ–™èˆ‡åœ–ç‰‡...";
    loader.style.display = 'flex';

    google.script.run
      .withSuccessHandler(function(res) {
        loader.style.display = 'none';
        
        if (res.success) {
          showAlert("å·²æˆåŠŸåˆªé™¤ï¼");

          // --- ä¿®æ”¹é‡é»é–‹å§‹ ---
          // 1. ç›´æ¥å¾æœ¬åœ°è®Šæ•¸ allPhotos ç§»é™¤è©²ç­†è³‡æ–™ (ä¸ç”¨å‘¼å« loadData)
          allPhotos = allPhotos.filter(photo => photo.id !== id);

          // 2. æª¢æŸ¥ç›®å‰æœ‰æ²’æœ‰æœå°‹é—œéµå­—
          const searchInput = document.getElementById('searchInput');
          if (searchInput.value.trim() !== '') {
            // å¦‚æœæœ‰æœå°‹å­—ï¼Œæ‰‹å‹•è§¸ç™¼ input äº‹ä»¶ï¼Œè®“å®ƒé‡æ–°éæ¿¾
            // é€™æ¨£ä½¿ç”¨è€…åˆªé™¤å¾Œï¼Œé‚„æœƒç•™åœ¨åŸæœ¬çš„æœå°‹çµæœè£¡ï¼Œé«”é©—æ¯”è¼ƒå¥½
            searchInput.dispatchEvent(new Event('input'));
          } else {
            // å¦‚æœæ²’æœå°‹ï¼Œç›´æ¥é‡ç•«æ›´æ–°å¾Œçš„ allPhotos
            renderGallery(allPhotos);
          }
          // --- ä¿®æ”¹é‡é»çµæŸ ---

        } else {
          showAlert("åˆªé™¤å¤±æ•—ï¼š" + res.error);
        }
      })
      .deletePhoto(id);
  });
}

    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function(e) {
      const keyword = e.target.value.toLowerCase();
      const filtered = allPhotos.filter(photo => {
        if (keyword.startsWith('#')) {
          const tagSearch = keyword.substring(1);
          return photo.tags && photo.tags.toLowerCase().includes(tagSearch);
        }
        return (photo.desc && photo.desc.toLowerCase().includes(keyword)) ||
               (photo.title && photo.title.toLowerCase().includes(keyword));
      });
      renderGallery(filtered);
    });

    function filterByTag(tagName, event) {
      event.stopPropagation();
      searchInput.value = '#' + tagName;
      searchInput.dispatchEvent(new Event('input'));
    }

    const modal = document.getElementById('detailModal');
    function openModal(photo) {
      document.getElementById('modalImg').src = photo.url;
      document.getElementById('modalTitle').innerText = photo.title;
      document.getElementById('modalDesc').innerText = photo.desc || 'ç„¡æç¤ºè©';

      // è¨­å®šåˆªé™¤æŒ‰éˆ•çš„ onclick äº‹ä»¶ï¼Œè®“å®ƒå‘¼å« deleteItem ä¸¦é—œé–‰ modal
      // æ³¨æ„ï¼šé€™è£¡å‚³å…¥ true ä»£è¡¨æ˜¯å¾ Modal è§¸ç™¼çš„ï¼Œåˆªé™¤å¾Œè¦é—œé–‰ Modal
      document.getElementById('modalDeleteBtn').onclick = (e) => deleteItem(photo.id, e, true);

      // --- Tag è™•ç† (æ¯”ç…§ Gallery çš„ # split é‚è¼¯) ---
      let tagsHtml = '';
      if (photo.tags) {
        const tagString = String(photo.tags);
        // ä½¿ç”¨ # åˆ‡å‰²ï¼Œä¸¦éæ¿¾ç©ºç™½
        const tagList = tagString.split('#').map(t => t.trim()).filter(t => t);

        tagsHtml = tagList.map(t =>
           `<span class="tag" onclick="filterByTag('${t}', event); closeModal();">${t}</span>`
        ).join('');
      }
      document.getElementById('modalTags').innerHTML = tagsHtml;

      modal.style.display = 'flex';
    }

    function closeModal() {
      modal.style.display = 'none';
    }

    window.onclick = function(event) {
      if (event.target == modal) closeModal();
    }

function copyDesc() {
  const text = document.getElementById('modalDesc').innerText;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.querySelector('.btn-copy');
    const originalContent = btn.innerHTML;
    btn.innerHTML = 'âœ… æç¤ºè©å·²è¤‡è£½';
    setTimeout(() => {
      btn.innerHTML = originalContent;
    }, 3000);
  });
}

    function toggleUpload() {
      const el = document.getElementById('uploadOverlay');
      el.style.display = el.style.display === 'none' ? 'flex' : 'none';
    }

    function handleUpload(e) {
      e.preventDefault();
      document.getElementById('loader').innerText = "æ­£åœ¨é€²è¡Œé€†å‘å·¥ç¨‹å»ºæª”ä¸­...";
      document.getElementById('loader').style.display = 'flex';

      const form = document.getElementById('uploadForm');
      google.script.run
        .withSuccessHandler(function(res) {
           document.getElementById('loader').style.display = 'none';
           if(res.success) {
             toggleUpload();
             form.reset();
             showAlert('è³‡æ–™å»ºæª”æˆåŠŸï¼'); // æ”¹ç”¨ showAlert
             loadData();
           } else {
             showAlert('å¤±æ•—: ' + res.error, "éŒ¯èª¤"); // æ”¹ç”¨ showAlert
           }
        })
        .uploadPhoto(form);
    }

    // é é¢è¼‰å…¥æ™‚è®€å–è¨­å®š
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);

    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme');
      const target = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', target);
      localStorage.setItem('theme', target);
    }

    function toggleUpload() {
      const el = document.getElementById('uploadOverlay');
      const isHidden = (el.style.display === 'none' || el.style.display === '');
      el.style.display = isHidden ? 'flex' : 'none';

      // å¦‚æœæ˜¯é–‹å•Ÿè¦–çª—ï¼Œè‡ªå‹•èšç„¦åœ¨æ¨™é¡Œæ¬„ä½
      if (isHidden) {
        setTimeout(() => {
           document.querySelector('input[name="title"]').focus();
        }, 100);
      }
    }


const sysModal = document.getElementById('systemModal');
    const sysTitle = document.getElementById('sysTitle');
    const sysMsg = document.getElementById('sysMsg');
    const sysBtnOk = document.getElementById('sysBtnOk');
    const sysBtnCancel = document.getElementById('sysBtnCancel');

    function closeSystemModal() {
      sysModal.style.display = 'none';
    }

    // å–ä»£ alert()
    function showAlert(msg, title = "æç¤º") {
      sysTitle.innerText = title;
      sysMsg.innerText = msg;
      sysBtnCancel.style.display = 'none'; // éš±è—å–æ¶ˆéˆ•
      sysBtnOk.onclick = closeSystemModal; // æŒ‰ç¢ºå®šåªé—œé–‰è¦–çª—
      sysModal.style.display = 'flex';
    }

    // å–ä»£ confirm() - é€™è£¡æœ€é‡è¦ï¼Œæ¥æ”¶ä¸€å€‹ callback å‡½å¼
    function showConfirm(msg, onConfirm) {
      sysTitle.innerText = "ç¢ºèªæ“ä½œ";
      sysMsg.innerText = msg;
      sysBtnCancel.style.display = 'block'; // é¡¯ç¤ºå–æ¶ˆéˆ•

      // ç•¶æŒ‰ä¸‹ç¢ºå®šæ™‚ï¼ŒåŸ·è¡Œå‚³é€²ä¾†çš„å‡½å¼ï¼Œç„¶å¾Œé—œé–‰è¦–çª—
      sysBtnOk.onclick = function() {
        onConfirm();
        closeSystemModal();
      };

      sysModal.style.display = 'flex';
    }

function clearFilter() {
  const input = document.getElementById('searchInput');
  input.value = '';
  renderGallery(allPhotos); 
}

// é–‹å•Ÿæ•™å­¸ Modal
  function openTutorial() {
    document.getElementById('tutorialModal').style.display = 'flex';
  }

  function closeTutorial() {
    document.getElementById('tutorialModal').style.display = 'none';
  }

  // é»æ“Š Modal å¤–éƒ¨é—œé–‰
  window.addEventListener('click', function(e){
    if(e.target == document.getElementById('tutorialModal')){
      closeTutorial();
    }
  });

  // é»æ“Šé—œéµå­—è¤‡è£½åŠŸèƒ½
  function copyKw(el) {
    const text = el.innerText;
    navigator.clipboard.writeText(text).then(() => {
      // ç°¡å–®çš„è¦–è¦ºå›é¥‹
      const originalBg = el.style.background;
      const originalText = el.innerText;
      
      el.innerText = 'å·²è¤‡è£½!';
      el.style.backgroundColor = 'var(--primary)';
      el.style.color = '#fff';

      setTimeout(() => {
        el.innerText = text;
        el.style.backgroundColor = '';
        el.style.color = '';
      }, 800);
    });
  }
  </script>
</body>
</html>